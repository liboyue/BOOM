<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BOOM: Toy Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BOOM
   &#160;<span id="projectnumber">v0.0.1</span>
   </div>
   <div id="projectbrief">An easy-to-use question answering pipeline framework.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Toy Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Configuring a pipeline for simple data processing in BOOM</h1>
<p>This toy example will show you all that is necessary to get started in BOOM.</p>
<p>The first step is to create a module for your pipeline to use. You can find the following code in <code><a class="el" href="_sample_8py.html">examples/toy/extra_modules/Sample.py</a></code>.</p>
<div class="fragment"><div class="line">import glog as log</div>
<div class="line">from boom.modules import Module</div>
<div class="line"> </div>
<div class="line">class Sample(Module):</div>
<div class="line"> </div>
<div class="line">    def __init__(self, module_id, name, rabbitmq_host, pipeline_conf, module_conf, **kwargs):</div>
<div class="line">        super(Sample, self).__init__(module_id, name, rabbitmq_host, pipeline_conf, module_conf, **kwargs)</div>
<div class="line"> </div>
<div class="line">    def process(self, job, data):</div>
<div class="line"> </div>
<div class="line">        log.debug(job)</div>
<div class="line">        result = [x + &#39; processed by &#39; + self.name + &#39;, params &#39; + str(job.params) for x in data[&#39;string_list&#39;]]</div>
<div class="line">        data[&#39;string_list&#39;] = result</div>
<div class="line">        log.debug(data)</div>
<div class="line"> </div>
<div class="line">        return data</div>
</div><!-- fragment --><p>In this example, we define a class <code>Sample</code> that extends the base <code>Module</code> class. The <code>__init__()</code> method in this case simply passes all the parameters up to the parent class, but a more complicated module may also have additionally initialization requirements that needs to be met here.</p>
<p>The only other requirement of our module is that it implements the process function which returns data for the next module to use. The pipeline for this module will consist of several <code>Sample</code> modules chained together, so this module will output data in the same format it reads it in.</p>
<p>The data is made available to the module as an argument to the <code>process()</code> method. The parameters are available as attributes of the job argument, which are expanded by the <code>pipeline</code> class. This example will process each line in the dataset and append the phrase: "processed by [module name], params [parameter values]".</p>
<p>In order to make use of this module, a pipeline needs to be defined in a configuration file. The configuration file for this example is shown here. The modules section declares a list of three <code>Sample</code> modules, that we have already implemented. The first module gets its data from the <code>data.json</code> file and the rest get their input from the preceding modules. The first module has two parameters: collection <code>p1</code> and integer <code>p2</code>. The second module has a float parameter, and the third module has no parameters at all. The final module is a standard CSVWriter module that will write the final output in CSV format, it does not take parameters.</p>
<div class="fragment"><div class="line">pipeline:</div>
<div class="line">    mode: docker # Running mode, local or docker</div>
<div class="line">    name: toy_pipeline # Name of the pipeline</div>
<div class="line">    rabbitmq_host: 127.0.0.1 # RabbitMQ&#39;s host&#39;s uri</div>
<div class="line">    clean_up: false # Whether the pipeline cleans up after finished running, true or false</div>
<div class="line">    use_mongodb: true # Whether to use MongoDB, true or false</div>
<div class="line">    mongodb_host: 127.0.0.1 # MongoDB&#39;s host&#39;s uri</div>
<div class="line"> </div>
<div class="line">modules:</div>
<div class="line">    -   name: module_1 # Name of the module</div>
<div class="line">        type: Sample # Type of the module</div>
<div class="line">        input_file: data.json # Input file&#39;s uri</div>
<div class="line">        output_module: module_2 # The following module&#39;s name</div>
<div class="line">        instances: 1 # Number of instances of this module</div>
<div class="line">        params:</div>
<div class="line">            -   name: p1</div>
<div class="line">                type: collection # Type of the param, int, float or collection</div>
<div class="line">                values: # Possible vaules for collection param</div>
<div class="line">                    - val1</div>
<div class="line">                    - val2</div>
<div class="line">                    - val3</div>
<div class="line"> </div>
<div class="line">            -   name: p2</div>
<div class="line">                type: int</div>
<div class="line">                start: 0</div>
<div class="line">                end: 20</div>
<div class="line">                step_size: 20</div>
<div class="line">            -   name: p2</div>
<div class="line">                type: int</div>
<div class="line">                start: 0</div>
<div class="line">                end: 20</div>
<div class="line">                step_size: 20</div>
<div class="line"> </div>
<div class="line">    -   name: module_2</div>
<div class="line">        type: Sample</div>
<div class="line">        output_module: module_3</div>
<div class="line">        instances: 1</div>
<div class="line">        params:</div>
<div class="line">            -   name: p</div>
<div class="line">                type: float</div>
<div class="line">                start: 0.0</div>
<div class="line">                end: 80.0</div>
<div class="line">                step_size: 40.0</div>
<div class="line">        </div>
<div class="line">    -   name: module_3</div>
<div class="line">        type: Sample</div>
<div class="line">        output_module: module_4</div>
<div class="line">        instances: 1</div>
<div class="line"> </div>
<div class="line">    -   name: module_4</div>
<div class="line">        type: CSVWriter</div>
<div class="line">        output_file: results.csv </div>
<div class="line">        instances: 1</div>
</div><!-- fragment --><p>To run this example, navigate to <code>example/toy</code> and run <code>boom</code>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
